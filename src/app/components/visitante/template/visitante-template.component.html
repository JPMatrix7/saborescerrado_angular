<header class="visitor-header">
  <div class="branding">
    <a routerLink="/" class="logo" (click)="closeMenu()">Sabores do Cerrado</a>
    <p class="tagline">Licores artesanais inspirados no Cerrado</p>
  </div>

  <nav class="desktop-nav">
    <a
      *ngFor="let link of navigation"
      class="nav-link"
      routerLinkActive="active"
      [routerLink]="link.route"
      [fragment]="link.fragment"
      (click)="closeMenu()"
    >
      {{ link.label }}
    </a>
  </nav>

  <div class="header-actions">
    <div class="cta-actions">
      <a class="ghost-button" routerLink="/produtos" (click)="closeMenu()">Catalogo</a>
    </div>
    <button class="pill-button" type="button" (click)="toggleCart()">
      Carrinho <span class="cart-count" *ngIf="cartCount()">{{ cartCount() }}</span>
    </button>
    <div class="account-actions">
      <a
        *ngIf="!isLoggedIn(); else profileLink"
        class="pill-button"
        routerLink="/login"
        (click)="closeMenu()"
      >
        Entrar / Cadastrar
      </a>
      <ng-template #profileLink>
        <a class="pill-button" routerLink="/perfil" (click)="closeMenu()">Perfil</a>
      </ng-template>
    </div>
    <button class="menu-icon" type="button" (click)="toggleMenu()" aria-label="Abrir menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</header>

<div class="cart-overlay" [class.visible]="cartOpen()" (click)="closeCart()"></div>
<app-carrinho [open]="cartOpen()" (close)="closeCart()"></app-carrinho>

<div class="mobile-menu" [class.open]="menuOpen()">
  <nav>
    <a
      *ngFor="let link of navigation"
      class="nav-link"
      routerLinkActive="active"
      [routerLink]="link.route"
      [fragment]="link.fragment"
      (click)="closeMenu()"
    >
      {{ link.label }}
    </a>
    <ng-container *ngIf="!isLoggedIn(); else mobileLogged">
      <a class="nav-link" routerLink="/login" (click)="closeMenu()">Entrar / Cadastrar</a>
    </ng-container>
    <ng-template #mobileLogged>
      <a class="nav-link" routerLink="/perfil" (click)="closeMenu()">Perfil</a>
    </ng-template>
    <a class="primary-button" routerLink="/produtos" (click)="closeMenu()">Ver produtos</a>
    <button class="nav-link" type="button" (click)="toggleCart()">Abrir carrinho</button>
  </nav>
</div>

<main class="visitor-content">
  <router-outlet />
</main>

<footer class="visitor-footer">
  <div class="footer-grid">
    <div>
      <p class="logo">Sabores do Cerrado</p>
      <p>Sabores autenticos vindos do Cerrado.</p>
    </div>
    <div>
      <p class="footer-heading">Visite</p>
      <a routerLink="/produtos">Lancamentos</a>
      <a routerLink="/produtos">Colecao classica</a>
      <a routerLink="/produtos">Edicoes limitadas</a>
    </div>
    <div>
      <p class="footer-heading">Contato</p>
      <p>atendimento@saboresdocerrado.com</p>
      <p>(63) 99999-9999</p>
    </div>
  </div>
  <p class="copyright">&copy; {{ currentYear }} Sabores do Cerrado. Todos os direitos reservados.</p>
</footer>
